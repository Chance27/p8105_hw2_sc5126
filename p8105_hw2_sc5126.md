p8105_hw2_sc5126
================
Si Chen
2023-10-04

**Load library**

``` r
library(tidyr)
library(tidyverse)
library(readxl)
library(haven)
```

## Problem 1

**Load dataset** Use data in pols-month.csv, unemployment.csv, and
snp.csv

``` r
month_data = 
  read_csv(file = "./data/pols-month.csv") %>% 
  janitor::clean_names()

unemployment_data = 
  read_csv(file = "./data/unemployment.csv") %>% 
  janitor::clean_names()

snp_data = 
  read_csv(file = "./data/snp.csv") %>% 
  janitor::clean_names()
```

First, clean the data in pols-month.csv. Use separate() to break up the
variable mon into integer variables year, month, and day; replace month
number with month name; create a president variable taking values gop
and dem, and remove prez_dem and prez_gop; and remove the day variable.

``` r
tidy_month_data = 
  separate(month_data, col = mon, into=c('year', 'month', 'day'), sep='-', convert = TRUE) %>% 
  mutate(
    month = 
      case_match(
        month, 
        1 ~ "January", 
        2 ~ "February",
        3 ~ "March",
        4 ~ "April",
        5 ~ "May",
        6 ~ "June",
        7 ~ "July",
        8 ~ "August",
        9 ~ "September",
        10 ~ "October",
        11 ~ "November",
        12 ~ "December"),
    month = as.factor(month)) %>% 
  mutate(
    president = recode(prez_gop,
                           "0" ="dem",
                           "1" ="gop",
                           "2" = "gop")
         ) |> 
  select(-prez_dem, -prez_gop, -day)
```

Second, clean the data in snp.csv using a similar process to the above.
For consistency across datasets, arrange according to year and month,
and organize so that year and month are the leading columns.

``` r
tidy_snp_data = 
  separate(snp_data, col = date, into=c('month', 'day', 'year'), sep='/', convert = TRUE) %>% 
  mutate(
    month = 
      case_match(
        month, 
        1 ~ "January", 
        2 ~ "February",
        3 ~ "March",
        4 ~ "April",
        5 ~ "May",
        6 ~ "June",
        7 ~ "July",
        8 ~ "August",
        9 ~ "September",
        10 ~ "October",
        11 ~ "November",
        12 ~ "December"),
    month = as.factor(month)) %>% 
  select(year, month, close)
```

Third, tidy the unemployment data so that it can be merged with the
previous datasets. This process will involve switching from “wide” to
“long” format; ensuring that key variables have the same name; and
ensuring that key variables take the same values.

``` r
tidy_unemployment_data = 
  pivot_longer(
    unemployment_data, 
    jan:dec,
    names_to = "month", 
    values_to = "unemployment") %>% 
    mutate(
    month = 
      case_match(
        month, 
        'jan' ~ "January", 
        'feb' ~ "February",
        'mar' ~ "March",
        'apr' ~ "April",
        'may' ~ "May",
        'jun' ~ "June",
        'jul' ~ "July",
        'aug' ~ "August",
        'sep' ~ "September",
        'oct' ~ "October",
        'nov' ~ "November",
        'dec' ~ "December"),
    month = as.factor(month)) %>% 
  select(year,month,unemployment)
```

Join the datasets by merging snp into pols, and merging unemployment
into the result.

``` r
tidy_snp_data$year = as.integer(paste0('20', tidy_snp_data$year))
result_data = 
  left_join(tidy_month_data, tidy_snp_data) %>% 
  left_join(x=., y = tidy_unemployment_data)
```

    ## Joining with `by = join_by(year, month)`
    ## Joining with `by = join_by(year, month)`

Write a short paragraph about these datasets. Explain briefly what each
dataset contained, and describe the resulting dataset (e.g. give the
dimension, range of years, and names of key variables).
